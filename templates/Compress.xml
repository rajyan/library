<template name="mycompress" value="template&lt;class T&gt;&#10;class Compress {&#10;private:&#10;    vector&lt;T&gt; comp;&#10;&#10;public:&#10;    Compress() {}&#10;    Compress(const vector&lt;T&gt; &amp;vec) : comp(vec) { build(); }&#10;&#10;    void add(const T &amp;x) { comp.emplace_back(x); }&#10;&#10;    void build() {&#10;        sort(begin(comp), end(comp));&#10;        comp.erase(unique(begin(comp), end(comp)), end(comp));&#10;    }&#10;&#10;    vector&lt;int&gt; get(const vector&lt;T&gt; &amp;vec) const {&#10;        vector&lt;int&gt; ret(vec.size());&#10;        transform(begin(vec), end(vec), ret.begin(), [&amp;](const T &amp;x) {&#10;            return (int)(lower_bound(begin(comp), end(comp), x) - begin(comp));&#10;        });&#10;        return ret;&#10;    }&#10;    int get(const T &amp;x) const { return lower_bound(begin(comp), end(comp), x) - begin(comp); }&#10;&#10;    const T &amp;operator[](const int k) const { return comp[k]; }&#10;};&#10;" description="" toReformat="true" toShortenFQNames="true">
    <context>
        <option name="OC_DECLARATION_C" value="true"/>
        <option name="OC_DECLARATION_CPP" value="true"/>
        <option name="OC_STATEMENT_C" value="true"/>
        <option name="OC_STATEMENT_CPP" value="true"/>
    </context>
</template>